#!/usr/bin/bash

[ $1 ] && TARGET=$1 || TARGET="box.ip"
[ $2 ] && DESTDIR=$2 || DESTDIR="$(pwd)/scans/"

cmd(){
	xte "str $1"
	sleep 0.5
	xte "key Return"
}

spawn_term()
{
	xte "keydown Super_L"
	sleep 0.1
	xte "key Return"
	sleep 0.1
	xte "keyup Super_L"
	sleep 0.2
}

_nmap_()
{
	spawn_term && cmd "nmap -sC -sV -p- -oN $DESTDIR/nmap $TARGET && notify-send 'nmap done'"
}

_gobuster_()
{
	spawn_term && cmd "gobuster dir -u $TARGET -w ~/tools/wordlists/dir/*medium* -t 100 -o $DESTDIR/gobuster && notify-send 'gobuster done'"
}

_nikto_()
{
	spawn_term && cmd "nikto -ask no -Format txt -host $TARGET -Save $DESTDIR/nikto && notify-send 'nikto done'"
}

# main

mkdir -p $DESTDIR

sleep 0.1

_nmap_
_gobuster_
_nikto_
